<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Main Page</title>
    <link rel="stylesheet" href="css/font.css"> <!-- 폰트 css -->
    <link rel="stylesheet" href="css/main_style.css"> <!-- style css -->
</head>

<body>
    <div id="content">
        <div id="left_page" th:if="${session.user == null}">
			<!-- 로그인 안돼있을때 보여지는 div -->
			<form action="/login_clear" method="post">
				<p class="login-txt">LOGIN</p>
				<input type="text" class="id" name="id" placeholder="ID">
				<input type="password" class="pwd" name="pwd" placeholder="Password">
				<button class="login-btn" type="submit">Login</button>
				<a class=sign-up href="/join">회원이 아니신가요?</a>
			</form>
		</div>
		
        <div id="left_page" th:if="${session.user != null}">
			<!-- 로그인 돼있을때 보여지는 div -->
			<!--배경화면 수정 버튼-->
			<img src="/imgs/camera.png" alt="Camera" class="camera-btn" onclick="editCamera()">
			<img src="/imgs/logout.png" alt="Logout" class="logout-btn" onclick="logOut()">
			<div class="line1">
				<p class="big_title" th:text="${session.user}"></p>
				<a href="#">수정</a>
			</div>
			<div class="line2">
				<p class="bio">한줄 소개 입니다.</p>
				<a href="#">수정</a>
			</div>
			<img src="/imgs/write.png" alt="Write" class="write-btn" onclick="writePost()">
        </div>

        <div id="main_page">
            <div id="header">
				<div class="category">
                    <img src="/imgs/category.png" alt="Category" class="category-btn" onclick="toggleCategoryPopup()">
                    <div class="category-popup" id="categoryPopup">
                        <div class="category-popup-content">
                            <a href="#">Category 1</a>
                            <br>
                            <a href="#">Category 2</a>
                            <br>
                            <a href="#">Category 3</a>
                            <br>
                            <a href="#">Category 4</a>
                        </div>
                        <span class="close-btn" onclick="closeCategoryPopup()">×</span>
                    </div>
                </div>
				<div class="header-title" onclick="backToMain()">
				    <p>BBS</p>
				</div>
				<div class="search-box">
			      <input type="text" class="search-txt" name="search" placeholder="Search by title">
			      <img src="/imgs/search.png" alt="Search Icon" class="search-btn" onclick="searchTitle()">
			        <i class="fas fa-search"></i>
			      </a>
			    </div>
            </div>
            
            <!-- 게시글 표시 -->
			<div id="list">
				<tr th:each = "bbs : ${bbsDB}">
					<div class="memo" th:onclick="'openPost(' + ${bbs.bbs_num} + ')'">
				        <p class="memo_title" th:text="${bbs.title}"></p>
				        <p class="memo_content" th:text="${bbs.content}"></p>
				    </div>
			</div>
			
			<!-- 페이징 -->
			<div id="paging_box">
			    <ul>
			        <li th:if="${currentPage > 1}" class="fir_btn">
			            <a th:href="@{/main(page=1)}">
			                <<
			            </a>
			        </li>
			        
			        <li th:if="${startPage >= 10}" class="pv_btn">
			            <a th:href="@{/main(page=${startPage - 1})}"
			            th:classappend="${startPage > 1} ? '' : 'disabled'">
			                이전
			            </a>
			        </li>
			        
			        <li th:each="pageNum : ${#numbers.sequence(startPage, endPage)}" class="page_btn">
			            <a th:href="@{/main(page=${pageNum})}"
			               th:classappend="${pageNum == currentPage} ? 'current' : ''"
			               th:text="${pageNum}">
			            </a>
			        </li>
			        
			        <li th:if="${endPage < totalPage}" class="next_btn">
			            <a th:href="@{/main(page=${startPage + 1})}"
			               th:classappend="${endPage < totalPage} ? '' : 'disabled'">
			                다음
			            </a>
			        </li>
			        
			        <li th:if="${currentPage < totalPage}" class="last_btn">
			            <a th:href="@{/main(page=${totalPage})}">
			                >>
			            </a>
			        </li>
			        
			    </ul>
			</div>
        </div>
    </div>
    
    <script src="js/main.js"></script>
</body>

</html>
